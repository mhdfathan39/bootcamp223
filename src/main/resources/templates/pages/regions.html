<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
    xmlns:with="http://www.thymeleaf.org/extras/with" layout:decorate="~{layout}" with:title="'B210'">
<th:block layout:fragment="content">
<div class="bottom">
    <div class="col">
        <div class="container">
            <button class="btn btn-success nBtn"> New Regions </button>
            <div class="card">
                <div class="card-block">
                    <table class="table table-hover">
                        <thead>
                            <tr>
                                <th>Regsion Id</th>
                                <th>Regions Name</th>
                                <th> </th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr th:each="reg :${regions}">
                                <td th:text="${reg.regionId}"></td>
                                <td th:text="${reg.regionName}"></td>
                                <td>
                                    <p th:each="country : ${reg.countries}">
                                        <span th:text="${country.countryName}">Street</span>
                                    </p>
                               </td> 
                            </tr>
                        </tbody>
                    </table>
                    <hr />
                </div>
                <div class="modal-body">
                    <!-- Content will be loaded here...  -->

                </div>
            </div>
        </div>
    </div>
</div>
</th:block>

<th:block layout:fragment="regions">
    <script>
        // AJAX request
        $(".nBtn, .table .eBtn").click(function () {
            event.preventDefault();
            var href = $(this).attr('href');
            var text = $(this).text();
            console.log('text : ' + text);
            if (text == 'Edit') {
                console.log('href : ' + href);

                $.ajax({
                    url: '/regions/add',
                    dataType: 'html',
                    type: 'get',
                    // data: {},
                    // data: { userid: userid },
                    success: function (response) {
                        console.log('reponse : ' + response);
                        // Add response in Modal body
                        $('.modal-body').html(response);

                        $.get(href, function (dept, status) {

                            $('.myFormUpdate #departmentId').val(dept.departmentId);
                            $('.myFormUpdate #departmentName').val(dept.departmentName);
                            $('.myFormUpdate #locationId').val(dept.locationId);

                        });

                        // Display Modal
                        $('.myFormUpdate #updateModal').modal('show');
                    }
                });

            } else {
                // AJAX request
                $.ajax({
                    url: '/regions/add',
                    dataType: 'html',
                    type: 'get',
                    // data: {},
                    // data: { userid: userid },
                    success: function (response) {
                        console.log('reponse : ' + response);
                        // Add response in Modal body
                        $('.modal-body').html(response);

                        // Display Modal
                        $('.myFormCreate #myModalCreate').modal('show');
                    }
                });

            }

        });



    </script>
</th:block>    